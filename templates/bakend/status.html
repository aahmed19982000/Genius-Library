{% extends "dashboard_base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/color_list.css' %}">
{% endblock %}

{% block dashboard_content %}
<section class="dashboard-section">
    <div class="dashboard-container">
        <h2 class="dashboard-title">
            <i class="fas fa-list" style="color:#E94B35;margin-left:8px;"></i> الحالات
        </h2>

        <!-- نموذج إضافة / تعديل حالة -->
        <div style="max-width:400px;margin:0 auto 24px auto;">
            <h3 style="color:#14375A;text-align:center;font-size:1.1rem;">
                {% if edit_status_obj %}تعديل الحالة{% else %}إضافة حالة جديدة{% endif %}
            </h3>
            <form method="post" style="margin-bottom:18px;">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit" class="add-btn">
                    {% if edit_status_obj %}تحديث الحالة{% else %}إضافة الحالة{% endif %}
                </button>
                {% if edit_status_obj %}
                    <a href="{% url 'status' %}" class="btn-action" style="background:#14375A;">إلغاء</a>
                {% endif %}
            </form>
        </div>

        <!-- جدول عرض الحالات -->
        <table class="color-table">
            <thead>
                <tr>
                    <th>اسم الحالة</th>
                    <th>إجراءات</th>
                </tr>
            </thead>
            <tbody>
                {% for s in status %}
                <tr>
                    <td>{{ s.status }}</td>
                    <td>
                        <a href="?edit={{ s.id }}" class="btn-action">تعديل</a>
                        <a href="?delete={{ s.id }}" class="btn-action" onclick="return confirm('هل أنت متأكد من حذف هذه الحالة؟');">حذف</a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="3" style="text-align:center;">لا توجد حالات مضافة حالياً</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</section>
{% endblock %}
